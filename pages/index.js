import Head from "next/head";

import { Card } from "primereact/card";

export async function getStaticProps() {
  const res = await fetch("http://localhost:3000/api/profiles");
  const data = await res.json();

  return {
    props: { data },
  };
}

export default function Home({ data }) {
  const card = (profile) => (
    <Card header={<img src={profile.image} alt={profile.name} />}>
      {profile.name}
    </Card>
  );

  return (
    <div>
      <Head>
        <title>Awesome Github Profiles</title>
        <meta name="description" content="Generated by create next app" />
      </Head>

      <main>
        <h1>Awesome GitHub Profiles</h1>

        {data && data.map((profile) => card(profile))}
      </main>

      <footer>
        <a
          href="https://github.com/EddieHub/awesome-github-profiles"
          target="_blank"
          rel="noopener noreferrer"
        >
          Powered by EddieHub
        </a>
      </footer>
    </div>
  );
}
